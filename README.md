# CLI

### Структура

- Входная точка находится в Main.kt
- Непосредственно функционал CLI находится в пакете cli
- В пакете cli.commands находятся классы, связанные с парсингом команд, а также сами команды
- В cli.environments находятся классы, связанные со средой выполнения команд в cli
- В cli.outputs классы, отвечающие за вывод результатов работы команд

### Идея решения

Общая идея заключается в том, чтобы сначала разделить поступившую на обработку строку на пайплайны, а пайплайны на команды, распарсить каждую команду, а затем последовательно выполнить, передавая по пайплайну результаты работы предыдущей команды к следующей.

Команды реализуют свой интерфейс. Каждая команда может как выполнить какое-то действие, не меняющее среду, так и поменять среду, если имплементирована отдельная функция.

Для добавления новой команды достаточно реализовать интерфейс и добавить в when-выражение CommandParser-а слово, по которому она будет идентифицирована

Для реализации вывода в файл можно будет доработать парсер, создать нового наследника Output и возвращать его в командах

### Тесты

Для тестирования использовался пакет kotlin-faker, чтобы генерировать строки. Также, в некоторых тестах создаются и удаляются файлы, для проверки команд cat и wc

### Code coverage

Для проверки покрытия тестами использовался плагин kotlinx-kover
. Минимальное значение покрытия установлено в 80 процентов

### Линтер

В качестве линтера использовался ktlint

### CI

В CI основная джоба, которая делает все проверки - build. В ней происходит компиляция, прогон тестов, оценка code coverage и проверка линтера. Также были добавлены gradle verifier и кеширование